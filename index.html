<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Language" content="en" />
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="js/jquery.js"></script>
    <title>Chinese Outbound Tourists</title>
</head>

<style>

h1{
    font-family: "Miller Display Bold","Clarion", "Georgia", serif;
    text-align: center;
}


h2,h3,h4,h5,p{
    font-family: "Benton Sans","Arial",sans-serif;
}

.intro{
  line-height: 20px;
}

.credit{
    text-align: center;
    padding-top: 20px;
}

.date{
    text-align: center;
    padding-bottom: 20px;
}

#head{
    width:80%;
    margin-left: auto;
    margin-right: auto;
}

.container{
    width: 40%;
    margin-left: 0px;
}

.description{
  display: none;
}

.axis line {
  fill: none;
  stroke: lightgrey;
  shape-rendering: crispEdges;
}

.axis text{
    font-size: 12;
}

.line{
    fill:none;
    stroke:black;
    stroke-width:1.5px;
}

#source{
	color: black;
	margin-left: 20px;
	margin-right: 20px;
	margin-top: 40px;
	margin-bottom: 40px;
	border-top: 1px solid darkgrey;
}

#main_container{
  margin-bottom: 50px;
}


@media only screen and (min-width:768px) {

  .container{
    width: 35%;
    margin-top: 50px;
    margin-left: 0px;
}

  #fixed{
    width: 55%;
    float:right;
    position: fixed;
    padding-top: 20px;
    right: 20px;
    font-style: bold;
  }

  }


@media only screen and (max-width:767px) {

  .container{
    width: 80%;
    margin-top: 50px;
    margin-left: auto;
    margin-right: auto;
}
  #head{
    height: 100%;
    margin-bottom: 20px;
  }
  
  #fixed{
    background-color: #fff1e0 ;
    width: 100%;
    position:fixed;
    padding-left: 10%;
    padding-right:10%;
    bottom: 0px;
    z-index: 99;
  }


}


</style>

<body style="background-color:#fff1e0">

<div id="head">
<h1>China Outbound Tourism in Review</h1>
<h5 class="credit">By JIEQIAN ZHANG</h5>
<h5 class="date">DEC.24, 2015</h5>
<h5 class="intro"> The number of outbound trips taken by Mainland Chinese tourists have seen itself a rapid growth over the past decade. According to the China National Tourism Administration, in 2014, China's yearly outbound tourists reached 100 million for the first time, and in the first half of 2015, the number has exceeded 610 million. Asia still dominates China's outbound tourism market, followed by the United States and Europe. 
</h5>
<h5 class="intro">Many reasons could lead to a rise in Chinese tourists – simplied visa application procedure, weak foreign currency, or even a popular movie. Here we are going to look back a decade on the top destinations for Chinese tourists and see what could be the reason for an increase or drop of Chinese tourists. 
</h5>
</div> 

<div>

    <div id="fixed">
       
    </div>



<div id="main_container">

    <div class="container graphic1">
        <h4><strong>Hong Kong</strong></h4>
        <p class="description">Hong Kong has ranked as the top destination for Chinese mainland tourists for over 10 years.</p>
        <p class="description">The number, however, dropped dramatically due to the protests against mainland shoppers starting in the first half of 2015. Dr. Lam Kin-ngok, chairman of Hong Kong Tourism Board, predicted that the number of mainland tourists will drop by 1% to 2% in 2015. If so, the year of 2015 will be the first year seeing a tourist drop since Hong Kong implemented Individual Visit Scheme, which let in individual mainland tourist to Hong Kong, in 2003.</p>
        <div id="graphic1"> 
        </div>
    </div>


 <!--    <div class="container graphic2">
        <h4><strong>Macao</strong></h4>
        <p class="description">Macao??????????</p>
        <div id="graphic2"> 
        </div>
    </div>
 -->
    <div class="container graphic3">
        <h4><strong>South Korea</strong></h4>
         <p class="description">South Korea has become the top foreign tourism destination for Chinese in 2014, with more than 6 million Chinese tourists. The number has seen double-digit growth over the past couple of years. Unfortunately, South Korea's tourism is hit hard by the MERS outbreak in 2015, when Chinese tourists chose to flock to its next-door neighbour Japan. </p>
        <div id="graphic3"> 
        </div>
    </div>

    <div class="container graphic4">
        <h4><strong>Thailand</strong></h4>
        <p class="description">Political instability and military coup are the major reasons affecting Thailand's tourism, which account for ten percent of the economy. The 2006 Thai coup d'état caused a 5% drop the year after. The 2014 coup has diminished the positive effects brought by Lost in Thailand, a Chinese hit moive and China's highest grossing film of 2012, which caused the number of Chinese tourists rise over 50% in 2012 and the year after. </p>
        <div id="graphic4"> 
        </div>
    </div>

    <div class="container graphic5">
        <h4><strong>Taiwan</strong></h4>
        <p class="description">Since July 2008, Taiwan passed a legislation allowing Chinese tourists to travel into Taiwan, millions have visited the island. Taiwan has become the second most popular tourism destination for Chinese tourists in the first half of 2015. </p>
        <div id="graphic5"> 
        </div>
    </div>

    <div class="container graphic6">
        <h4><strong>Japan</strong></h4>
        <p class="description"> Japan's tourism was hit hard by the devastating earthquake, tsuanmi, and Fukushima Daiichi nuclear crisis in 2011. The situation has improved since Japanese yen's sharp depreciation since 2012. The depreciation of the Japanese yen is cutting travel expenses for foreign tourists, prompting many mainlanders to visit Japan. </p>
        <div id="graphic6"> 
        </div>
    </div>

    <div class="container graphic7">
        <h4><strong>United States</strong></h4>
        <p class="description"></p>
        <div id="graphic7"> 
        </div>
    </div>

   <!--  <div class="container graphic8">
        <h4><strong>Vietnam</strong></h4>
        <p class="description">Vietnam ????????</p>
        <div id="graphic8"> 
        </div>
    </div>
 -->
    <div class="container graphic9">
        <h4><strong>Malaysia</strong></h4>
        <p class="description"></p>
        <div id="graphic9"> 
        </div>
    </div>

   <!--  <div class="container graphic10">
        <h4><strong>Russia</strong></h4>
        <p class="description">Russia ????????????????</p>
        <div id="graphic10"> 
        </div>
    </div>
 -->
    <div class="container">
    </div>

</div>

</div>

<div id="source">
<h6>Data source: United Nation World Travel Organization (updated December 22, 2015) and World Bank Data</h6> 
</div>


<!-- <script src="//d3js.org/d3.v3.min.js"></script> -->


<script type="text/javascript" src="js/d3.min.js"></script>

<script>
var w = parseInt(d3.select(".container").style("width"), 10);

var windowWidth = $(window).width();

var margin = {top: 20, right: 15, bottom: 30, left: 50},
    width = w - margin.left - margin.right,
    height = 200 - margin.top - margin.bottom;

var parseDate = d3.time.format("%y").parse;

var x = d3.scale.linear()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickSize(-height,0,0)
    .tickValues([2004,2006,2008,2010,2012,2014])
    .tickFormat(d3.format("d"));

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickSize(-windowWidth,0,0);

var area = d3.svg.area()
    .x(function(d) { return x(d.year); })
    .y0(height/2)
    .y1(function(d) { return y(d.increase_rate); });

var line = d3.svg.line()
     .x(function(d) { return x(d.year); })
     .y(function(d) { return y(d.increase_rate); });


d3.csv("data.csv", function(error, data) {
  if (error) throw error;

  data.forEach(function(d) {
    d.year = +d.year;
    d.incrase_rate = +d.increase_rate;
  });


  // draw the Hong Kong chart

  var svg_hk = d3.select("#graphic1").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data_hk = data.filter(function(d,i){
    if (d.country_code === "HKG" & d.year >= 2004){
        return d;
    }
  });

  var x_hk = d3.scale.linear()
    .range([0, width])
    .domain([2004,2015]);


  var xAxis_hk = d3.svg.axis()
    .scale(x_hk)
    .orient("bottom")
    .tickSize(-height,0,0)
    .tickValues([2004,2006,2008,2010,2012,2014])
    .tickFormat(d3.format("d"));

 
  y.domain([-60,60]);

  yAxis.tickValues([50, 25, 0, -25, -50]);

  var area_hk = d3.svg.area()
    .x(function(d) { return x_hk(d.year); })
    .y0(height/2)
    .y1(function(d) { return y(d.increase_rate); });

var line_hk = d3.svg.line()
     .x(function(d) { return x_hk(d.year); })
     .y(function(d) { return y(d.increase_rate); });

  svg_hk.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis_hk);

  svg_hk.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -40)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Increase rate")
      .style("font-size","12");

  svg_hk.append("path")
      .datum(data_hk)
      .attr("class", "area")
      .attr("d", area_hk)
      .style("fill","#9e2f50");


  svg_hk.append("path")
      .datum(data_hk)
      .attr("class", "line")
      .attr("d",line_hk)

  svg_hk.append("line")
  	.attr("x1", function(){
  		return x_hk(2014)
  	})
  	.attr("y1",function(){
  		return y(15.958655)
  	})
  	.attr("x2", function(){
  		return x_hk(2015)
  	})
  	.attr("y2",function(){
  		return y(-1.5)
  	})
  	.attr("stroke-width", 1.5)
    .attr("stroke", "black")
    .attr("id","line_hk")
    .style("stroke-dasharray",("2,2"));

  svg_hk.append("text")
    .text("Protests against mainland tourists")
    .style("text-anchor","end")
    .attr("x", function(){
      return x_hk(2015)
    })
    .attr("y",function(){
      return y(-16)
    })
    .attr("font-size",11)
    .attr("transform", "translate(" + 15 + "," + 0 + ")")
    .attr("id","note_hk1");

  svg_hk.append("line")
    .attr("x1", function(){
      return x_hk(2015)
    })
    .attr("y1",function(){
      return y(-3)
    })
    .attr("x2", function(){
      return x_hk(2015)
    })
    .attr("y2",function(){
      return y(-9)
    })
    .attr("stroke-width", 1)
    .attr("stroke", "black")
    .attr("id","line_hk1");

  
// draw the Macao chart

 var svg_mk = d3.select("#graphic2").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data_mk = data.filter(function(d,i){
    if (d.country_code === "MAC" & d.year >= 2004){
        return d;
    }
  });

  x.domain([2004,2014]);
  y.domain([-60,60]);

  yAxis.tickValues([50, 25, 0, -25, -50]);

  svg_mk.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg_mk.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -40)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Increase rate")
      .style("font-size","12");

  svg_mk.append("path")
      .datum(data_mk)
      .attr("class", "area")
      .attr("d", area)
      .style("fill","#9e2f50");

  svg_mk.append("path")
      .datum(data_mk)
      .attr("class", "line")
      .attr("d", line);

// draw the South Korea chart

 var svg_sk = d3.select("#graphic3").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data_sk = data.filter(function(d,i){
    if (d.country_code === "KOR" & d.year >= 2004){
        return d;
    }
  });

  x.domain([2004,2014]);
  y.domain([-60,60]);

  yAxis.tickValues([50, 25, 0, -25, -50]);

  svg_sk.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg_sk.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -40)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Increase rate")
      .style("font-size","12");

  svg_sk.append("path")
      .datum(data_sk)
      .attr("class", "area")
      .attr("d", area)
      .style("fill","#9e2f50");

  svg_sk.append("path")
      .datum(data_sk)
      .attr("class", "line")
      .attr("d", line);


// draw the Thailand chart

 var svg_th = d3.select("#graphic4").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data_th = data.filter(function(d,i){
    if (d.country_code === "THA" & d.year >= 2004){
        return d;
    }
  });

  x.domain([2004,2014]);
  y.domain([-60,60]);

  yAxis.tickValues([50, 25, 0, -25, -50]);

  svg_th.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg_th.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -40)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Increase rate")
      .style("font-size","12");

  svg_th.append("path")
      .datum(data_th)
      .attr("class", "area")
      .attr("d", area)
      .style("fill","#9e2f50");

  svg_th.append("path")
      .datum(data_th)
      .attr("class", "line")
      .attr("d", line);

  svg_th.append("text")
    .text("2006 Thai coup d'état")
    .style("text-anchor","middle")
    .attr("x", function(){
      return x(2006)
    })
    .attr("y",function(){
      return y(35)
    })
    .attr("font-size",11)
    .attr("id","note_th1");

  svg_th.append("line")
    .attr("x1", function(){
      return x(2006)
    })
    .attr("y1",function(){
      return y(25)
    })
    .attr("x2", function(){
      return x(2006)
    })
    .attr("y2",function(){
      return y(33)
    })
    .attr("stroke-width", 1)
    .attr("stroke", "black")
    .attr("id","line_th1");

  svg_th.append("text")
  	.text("The film Lost in Thailand released")
  	.style("text-anchor","middle")
  	.attr("x", function(){
  		return x(2012)
  	})
  	.attr("y",function(){
  		return y(70)
  	})
  	.attr("font-size",11)
    .attr("transform", "translate(" + -25 + "," + 0 + ")")
  	.attr("id","note_th2");

  svg_th.append("line")
  	.attr("x1", function(){
  		return x(2012)
  	})
  	.attr("y1",function(){
  		return y(68)
  	})
  	.attr("x2", function(){
  		return x(2012)
  	})
  	.attr("y2",function(){
  		return y(63)
  	})
  	.attr("stroke-width", 1)
    .attr("stroke", "black")
    .attr("id","line_th2");

  svg_th.append("text")
    .text("2014 Thai coup d'état")
    .style("text-anchor","end")
    .attr("x", function(){
      return x(2014)
    })
    .attr("y",function(){
      return y(-20)
    })
    .attr("font-size",11)
    .attr("transform", "translate(" + 15 + "," + 0 + ")")
    .attr("id","note_th3");

  svg_th.append("line")
    .attr("x1", function(){
      return x(2014)
    })
    .attr("y1",function(){
      return y(-2)
    })
    .attr("x2", function(){
      return x(2014)
    })
    .attr("y2",function(){
      return y(-12)
    })
    .attr("stroke-width", 1)
    .attr("stroke", "black")
    .attr("id","line_th3");

 
  // draw the Taiwan chart, using a different range

 var svg_tw = d3.select("#graphic5").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height * 2 + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data_tw = data.filter(function(d,i){
    if (d.country === "Taiwan" & d.year >= 2009){
        return d;
    }
  });

  var y_tw = d3.scale.linear()
    .range([height * 2, 0])
    .domain([0,210]);

 var xAxis_tw = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickSize(-height * 2,0,0)
    .tickValues([2004,2006,2008,2010,2012,2014])
    .tickFormat(d3.format("d"));

var yAxis_tw = d3.svg.axis()
    .scale(y_tw)
    .orient("left")
    .tickSize(-windowWidth,0,0)
    .tickValues([200, 150, 100, 50]);

var area_tw = d3.svg.area()
    .x(function(d) { return x(d.year); })
    .y0(height * 2)
    .y1(function(d) { return y_tw(d.increase_rate); });

var line_tw = d3.svg.line()
     .x(function(d) { return x(d.year); })
     .y(function(d) { return y_tw(d.increase_rate); });

  svg_tw.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height * 2 + ")")
      .call(xAxis_tw);

  svg_tw.append("g")
      .attr("class", "y axis")
      .call(yAxis_tw)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -40)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Increase rate")
      .style("font-size","12");

  svg_tw.append("path")
      .datum(data_tw)
      .attr("class", "area")
      .attr("d", area_tw)
      .style("fill","#9e2f50");

  svg_tw.append("path")
      .datum(data_tw)
      .attr("class", "line")
      .attr("d", line_tw);



  // draw the Japan chart

 var svg_jp = d3.select("#graphic6").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data_jp = data.filter(function(d,i){
    if (d.country_code === "JPN" & d.year >= 2004){
        return d;
    }
  });


  x.domain([2004,2014]);
  y.domain([-60,60]);

  yAxis.tickValues([50, 25, 0, -25, -50]);

  svg_jp.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg_jp.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -40)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Increase rate")
      .style("font-size","12");

  svg_jp.append("path")
      .datum(data_jp)
      .attr("class", "area")
      .attr("d", area)
      .style("fill","#9e2f50");

  svg_jp.append("path")
      .datum(data_jp)
      .attr("class", "line")
      .attr("d", line);

  svg_jp.append("text")
    .text("2011 Tōhoku earthquake")
    .style("text-anchor","middle")
    .attr("x", function(){
      return x(2011)
    })
    .attr("y",function(){
      return y(-50)
    })
    .attr("font-size",11)
    .attr("id","note_jp1");

  svg_jp.append("line")
    .attr("x1", function(){
      return x(2011)
    })
    .attr("y1",function(){
      return y(-28)
    })
    .attr("x2", function(){
      return x(2011)
    })
    .attr("y2",function(){
      return y(-45)
    })
    .attr("stroke-width", 1)
    .attr("stroke", "black")
    .attr("id","line_jp1");



  // draw the United States chart

 var svg_us = d3.select("#graphic7").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data_us = data.filter(function(d,i){
    if (d.country_code === "USA" & d.year >= 2004){
        return d;
    }
  });


  x.domain([2004,2014]);
  y.domain([-60,60]);

  yAxis.tickValues([50, 25, 0, -25, -50]);

  svg_us.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg_us.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -40)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Increase rate")
      .style("font-size","12");

  svg_us.append("path")
      .datum(data_us)
      .attr("class", "area")
      .attr("d", area)
      .style("fill","#9e2f50");

  svg_us.append("path")
      .datum(data_us)
      .attr("class", "line")
      .attr("d", line);


   // draw the Vietnam chart

 var svg_vt = d3.select("#graphic8").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data_vt = data.filter(function(d,i){
    if (d.country_code === "VNM" & d.year >= 2004){
        return d;
    }
  });


  x.domain([2004,2014]);
  y.domain([-60,60]);

  yAxis.tickValues([50, 25, 0, -25, -50]);

  svg_vt.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg_vt.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -40)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Increase rate")
      .style("font-size","12");

  svg_vt.append("path")
      .datum(data_vt)
      .attr("class", "area")
      .attr("d", area)
      .style("fill","#9e2f50");

  svg_vt.append("path")
      .datum(data_vt)
      .attr("class", "line")
      .attr("d", line);

   // draw the Malaysia chart

 var svg_ms = d3.select("#graphic9").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data_ms = data.filter(function(d,i){
    if (d.country_code === "MYS" & d.year >= 2004){
        return d;
    }
  });


  x.domain([2004,2014]);
  y.domain([-60,60]);

  yAxis.tickValues([50, 25, 0, -25, -50]);

  svg_ms.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg_ms.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -40)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Increase rate")
      .style("font-size","12");

  svg_ms.append("path")
      .datum(data_ms)
      .attr("class", "area")
      .attr("d", area)
      .style("fill","#9e2f50");

  svg_ms.append("path")
      .datum(data_ms)
      .attr("class", "line")
      .attr("d", line);


   // draw the Russia chart

 var svg_rs = d3.select("#graphic10").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data_rs = data.filter(function(d,i){
    if (d.country_code === "RUS" & d.year >= 2004){
        return d;
    }
  });


  x.domain([2004,2014]);
  y.domain([-60,60]);

  yAxis.tickValues([50, 25, 0, -25, -50]);

  svg_rs.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg_rs.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -40)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Increase rate")
      .style("font-size","12");

  svg_rs.append("path")
      .datum(data_rs)
      .attr("class", "area")
      .attr("d", area)
      .style("fill","#9e2f50");

  svg_rs.append("path")
      .datum(data_rs)
      .attr("class", "line")
      .attr("d", line);



  d3.select(window).on("resize", resize);

    function resize() {
        // update width
        w = parseInt(d3.select(".container").style("width"), 10);
        width = w - margin.left - margin.right;


        // resize the chart
        x.range([0, width]);
        y.domain([-60,60])

        d3.select(svg_hk.node().parentNode)
            .style("width", (width + margin.left + margin.right) + "px");

        x_hk.range([0,width])
        	.domain([2004,2015]);

        svg_hk.selectAll(".area")
            .attr("d", area_hk);

        svg_hk.selectAll(".line")
            .attr("d",line_hk);

        svg_hk.select("#line_hk")
		  	.attr("x1", function(){
		  		return x_hk(2014)
		  	})
		  	.attr("y1",function(){
		  		return y(15.958655)
		  	})
		  	.attr("x2", function(){
		  		return x_hk(2015)
		  	})
		  	.attr("y2",function(){
		  		return y(-1.5)
		  	});

        svg_hk.select("#note_hk1")
          .attr("x", function(){  
            return x_hk(2015)
          });

        svg_hk.select("#line_hk1") 
        .attr("x1", function(){
          return x_hk(2015)
        })
        .attr("x2", function(){
          return x_hk(2015)
        });
       
  

        svg_hk.select("g").call(xAxis_hk.orient("bottom"));


        // d3.select(svg_mk.node().parentNode)
        //     .style("width", (width + margin.left + margin.right) + "px");
       
        // svg_mk.selectAll(".area")
        //     .attr("d", area);

        // svg_mk.selectAll(".line")
        //     .attr("d",line)

        // svg_mk.select("g").call(xAxis.orient("bottom"));


        d3.select(svg_sk.node().parentNode)
            .style("width", (width + margin.left + margin.right) + "px");
       
        svg_sk.selectAll(".area")
            .attr("d", area);

        svg_sk.selectAll(".line")
            .attr("d",line)

        svg_sk.select("g").call(xAxis.orient("bottom"));


        d3.select(svg_th.node().parentNode)
            .style("width", (width + margin.left + margin.right) + "px");
       
        svg_th.selectAll(".area")
            .attr("d", area);

        svg_th.selectAll(".line")
            .attr("d",line);

        svg_th.select("#note_th1")  
        .attr("x", function(){
          return x(2006)
        });
       svg_th.select("#line_th1")
        .attr("x1", function(){
          return x(2006)
        })
        .attr("x2", function(){
          return x(2006)
        });
    
        svg_th.select("#note_th2")	
		  	.attr("x", function(){
		  		return x(2012)
		  	});

		   svg_th.select("#line_th2")
		  	.attr("x1", function(){
		  		return x(2012)
		  	})
		  	.attr("x2", function(){
		  		return x(2012)
		  	});

        svg_th.select("#note_th3")
          .attr("x", function(){
            return x(2014)
          });
       
        svg_th.select("#line_th3")
          .attr("x1", function(){
            return x(2014)
          })
          .attr("x2", function(){
            return x(2014)
          });
          


        svg_th.select("g").call(xAxis.orient("bottom"));



        d3.select(svg_tw.node().parentNode)
            .style("width", (width + margin.left + margin.right) + "px");
        y_tw.domain([0,210])

        svg_tw.selectAll(".area")
            .attr("d", area_tw);

        svg_tw.selectAll(".line")
            .attr("d",line_tw)

        svg_tw.select("g").call(xAxis_tw.orient("bottom"));


        d3.select(svg_jp.node().parentNode)
            .style("width", (width + margin.left + margin.right) + "px");
       
        svg_jp.selectAll(".area")
            .attr("d", area);

        svg_jp.selectAll(".line")
            .attr("d",line)


        svg_jp.select("#note_jp1")
          .attr("x", function(){
            return x(2011)
          });
       
        svg_jp.select("#line_jp1")
          .attr("x1", function(){
            return x(2011)
          })
          .attr("x2", function(){
            return x(2011)
          });
          

        svg_jp.select("g").call(xAxis.orient("bottom"));


        d3.select(svg_us.node().parentNode)
            .style("width", (width + margin.left + margin.right) + "px");
       
        svg_us.selectAll(".area")
            .attr("d", area);

        svg_us.selectAll(".line")
            .attr("d",line)

        svg_us.select("g").call(xAxis.orient("bottom"));


        // d3.select(svg_vt.node().parentNode)
        //     .style("width", (width + margin.left + margin.right) + "px");
       
        // svg_vt.selectAll(".area")
        //     .attr("d", area);

        // svg_vt.selectAll(".line")
        //     .attr("d",line)

        // svg_vt.select("g").call(xAxis.orient("bottom"));


        d3.select(svg_ms.node().parentNode)
            .style("width", (width + margin.left + margin.right) + "px");
       
        svg_ms.selectAll(".area")
            .attr("d", area);

        svg_ms.selectAll(".line")
            .attr("d",line)

        svg_ms.select("g").call(xAxis.orient("bottom"));


        // d3.select(svg_rs.node().parentNode)
        //     .style("width", (width + margin.left + margin.right) + "px");
       
        // svg_rs.selectAll(".area")
        //     .attr("d", area);

        // svg_rs.selectAll(".line")
        //     .attr("d",line)

        // svg_rs.select("g").call(xAxis.orient("bottom"));

    }

      
});
    
</script>

<script>


$(window).load(function () {
    $(window).on("scroll resize", function () {
        var pos = $('#fixed').offset();
        $('.container').each(function () {
            if (pos.top >= $(this).offset().top && pos.top <= $(this).next().offset().top) {
                $('#fixed').html($(this).find('.description').text());
                $(this).css({'opacity': 1});
                $(this).prev().css({'opacity': .4});
                 $(this).next().css({'opacity': .4});

                return; 
            }
        });
    });

    $(document).ready(function () {
        $(window).trigger('scroll'); // init the value
    });

})


</script>

</body>